@page "/timespan-duration"
@using EasyAppDev.Blazor.PageCache.Attributes

@* Cached for 1 hour (3600 seconds) *@
@attribute [PageCache(Duration = 3600)]

<PageTitle>TimeSpan Duration - Page Cache Demo</PageTitle>

<h1>TimeSpan Duration in Configuration</h1>

<div class="alert alert-warning">
    <h4>Important: TimeSpan in Attributes</h4>
    <p><strong>You CANNOT use TimeSpan directly in attributes!</strong></p>
    <p>C# attributes only support compile-time constants. Method calls like <code>TimeSpan.FromHours(1)</code> are not allowed in attribute syntax.</p>
    <p>This page is cached using: <code>[PageCache(Duration = 3600)]</code> (seconds)</p>
    <ul>
        <li><strong>Rendered at:</strong> @DateTime.Now.ToString("HH:mm:ss")</li>
    </ul>
</div>

<h2>Common Cache Durations (in Seconds)</h2>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Duration</th>
            <th>Seconds</th>
            <th>Attribute Syntax</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>30 seconds</td>
            <td>30</td>
            <td><code>[PageCache(Duration = 30)]</code></td>
        </tr>
        <tr>
            <td>5 minutes</td>
            <td>300</td>
            <td><code>[PageCache(Duration = 300)]</code></td>
        </tr>
        <tr>
            <td>1 hour</td>
            <td>3600</td>
            <td><code>[PageCache(Duration = 3600)]</code></td>
        </tr>
        <tr>
            <td>1 day</td>
            <td>86400</td>
            <td><code>[PageCache(Duration = 86400)]</code></td>
        </tr>
        <tr>
            <td>Custom (90 minutes)</td>
            <td>5400</td>
            <td><code>[PageCache(Duration = 5400)]</code></td>
        </tr>
    </tbody>
</table>

<h2>Using TimeSpan in Configuration (Program.cs)</h2>

<p><strong>Good news!</strong> While you can't use TimeSpan in attributes, you CAN use it in your Program.cs configuration:</p>

<pre><code class="language-csharp">// Using seconds (works everywhere)
services.AddPageCache(options =>
{
    options.DefaultDurationSeconds = 300;
    options.SlidingExpirationSeconds = 60;
});

// Using TimeSpan (only in Program.cs configuration)
services.AddPageCache(options =>
{
    options.DefaultDuration = TimeSpan.FromMinutes(5);
    options.SlidingExpiration = TimeSpan.FromMinutes(1);
});
</code></pre>

<h2>Summary</h2>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">✓ Where TimeSpan Works</h5>
                <ul>
                    <li><strong>Program.cs:</strong> <code>options.DefaultDuration = TimeSpan.FromMinutes(5)</code></li>
                    <li><strong>Service Configuration:</strong> All PageCacheOptions properties</li>
                    <li><strong>Code:</strong> Any programmatic API calls</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">✗ Where TimeSpan Doesn't Work</h5>
                <ul>
                    <li><strong>Attributes:</strong> <code>[PageCache(Duration = ???)]</code></li>
                    <li><strong>Reason:</strong> C# attributes require compile-time constants</li>
                    <li><strong>Solution:</strong> Use seconds: <code>[PageCache(Duration = 300)]</code></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="mt-4">
    <p class="text-muted">
        <small>
            <strong>Technical Limitation:</strong> C# attributes can only accept compile-time constant values.
            Since <code>TimeSpan.FromHours(1)</code> is a method call, it cannot be used in attribute syntax.
            The Duration property accepts integers (seconds) which are compile-time constants.
        </small>
    </p>
</div>

@code {
    // This page is cached for 1 hour (3600 seconds)
    // Using: [PageCache(Duration = 3600)]
}
